# Data Model: RAG Pipeline Setup & Embedding Storage

This document outlines the key entities and their structures relevant to the RAG pipeline's content ingestion and storage in Qdrant.

## 1. Text Chunk

Represents a segment of text extracted from the textbook content.

*   **`id`** (String, UUID): A unique identifier for the text chunk. This will also serve as the unique ID for the vector in Qdrant.
*   **`content`** (String): The actual textual content of the chunk.
*   **`metadata`** (Object): A dictionary containing additional contextual information about the text chunk.
    *   **`source_url`** (String, URL): The URL of the page from which this content was extracted. Essential for tracing the origin.
    *   **`chapter`** (String, Optional): The title of the chapter this chunk belongs to.
    *   **`section`** (String, Optional): The title of the section this chunk belongs to.
    *   **`page_number`** (Integer, Optional): The page number within the textbook where this chunk originated.
    *   **`timestamp`** (String, ISO 8601): The timestamp when this chunk was extracted and processed. Useful for versioning or freshness checks.

## 2. Embedding

Represents the vector-space numerical representation of a Text Chunk, generated by the Cohere `embed-english-v3.0` model.

*   **`vector`** (Array of Floats): The dense vector representation. The dimensionality will be determined by the Cohere `embed-english-v3.0` model output.

## 3. Qdrant Collection Structure

Qdrant will store a collection where each point corresponds to an `Embedding` of a `Text Chunk`.

*   **Point ID**: Corresponds to the `Text Chunk`'s `id`.
*   **Vector**: The `vector` field from the `Embedding` entity.
*   **Payload**: The `metadata` object from the `Text Chunk` entity. This allows for filtering and direct access to contextual information during retrieval.

**Example Qdrant Point:**

```json
{
  "id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
  "vector": [0.1, 0.2, ..., 0.9], // Cohere embedding vector
  "payload": {
    "source_url": "https://example.com/textbook/module1/chapter1",
    "chapter": "Introduction to Physical AI",
    "section": "What is Physical AI?",
    "page_number": 10,
    "timestamp": "2025-12-21T10:30:00Z"
  }
}
```
